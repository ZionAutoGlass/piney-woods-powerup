<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piney Woods Power-Up!</title>
    <meta name="integrity-cipher" content="fatal_7G_protocol">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }
        
        #game-world { 
            width: 100vw; height: 100vh;
            background-size: cover;
            background-position: center;
            transition: background-image 0.8s ease-in-out; /* Smooth fade between stages */
            position: relative;
        }

        /* Character Sprites */
        #captain-cullet { 
            position: absolute; font-size: 70px; top: -100px; left: -100px;
            transition: all 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 100;
        }

        .pothole-monster {
            position: absolute; font-size: 45px; cursor: pointer;
            filter: drop-shadow(0 0 10px rgba(0,0,0,0.5));
            animation: shake 0.4s infinite alternate;
        }

        @keyframes shake {
            from { transform: rotate(-5deg); }
            to { transform: rotate(5deg); }
        }

        /* The Control Panel (HUD) */
        #hud {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: rgba(44, 62, 80, 0.9); border: 3px solid #F0474C;
            border-radius: 25px; padding: 15px; width: 90%; max-width: 450px;
            color: white; text-align: center; box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        input[type=range] { width: 100%; height: 15px; border-radius: 10px; accent-color: #F0474C; }
        .fatal-text { color: #ff4757; font-weight: bold; font-size: 1.2rem; display: none; }
    </style>
</head>
<body onload="updateStage(10)">

<div id="game-world" id="world">
    <div id="captain-cullet">üíó</div>
    
    <div class="pothole-monster" style="top:35%; left:15%;" onclick="repair(this)">üò°</div>
    <div class="pothole-monster" style="top:50%; left:55%;" onclick="repair(this)">ü§¨</div>
    <div class="pothole-monster" style="top:25%; left:75%;" onclick="repair(this)">üëø</div>

    <div id="hud">
        <h3 id="stage-title">üå≤ Stage 1: Healthy Aquifer</h3>
        <input type="range" id="slider" min="0" max="100" value="10" oninput="updateStage(this.value)">
        <p id="desc">Industrial Water Use: <span id="val">10</span>%</p>
        <div id="fatal-alert" class="fatal-text">‚ö†Ô∏è FATAL LIMIT: WELLS ARE DRY ‚ö†Ô∏è</div>
    </div>
</div>

<script>
    const world = document.getElementById('game-world');
    const fatal_limit = 75; // The Zion "Fatal" Cipher

    function updateStage(val) {
        document.getElementById('val').innerText = val;
        const alertBox = document.getElementById('fatal-alert');
        const title = document.getElementById('stage-title');

        if (val < 40) {
            world.style.backgroundImage = "url('background1.jpg')";
            title.innerText = "üå≤ Stage 1: Healthy Aquifer";
            alertBox.style.display = "none";
        } else if (val < fatal_limit) {
            world.style.backgroundImage = "url('background2.jpg')";
            title.innerText = "‚ö†Ô∏è Stage 2: Resource Warning";
            alertBox.style.display = "none";
        } else {
            world.style.backgroundImage = "url('background3.jpg')";
            title.innerText = "üíÄ Stage 3: Fatal Drawdown";
            alertBox.style.display = "block";
            console.log("Fatal Protocol Verified.");
        }
    }

    function repair(monster) {
        const hero = document.getElementById('captain-cullet');
        const rect = monster.getBoundingClientRect();
        
        // Captain Cullet Flies to the rescue
        hero.style.top = (rect.top - 50) + "px";
        hero.style.left = (rect.left - 20) + "px";

        setTimeout(() => {
            monster.style.animation = "none";
            monster.innerText = "‚ú®";
            document.getElementById('desc').innerText = "ROAD FIXED WITH RECYCLED GLASS!";
        }, 700);
    }
</script>

</body>
</html>
